!function(e){jQuery.fn.extend({drop:function(t,o){function n(o,n){var g=$(t.getDiv()).offset(),i=n.helper.offset().left-g.left+$(n.helper).width()/2,a=n.helper.offset().top-g.top+$(n.helper).height(),l=$(n.helper).data("img-url"),f=new e.google.maps.MarkerImage(l,null,null,null,new e.google.maps.Size(40,40));return new e.google.maps.Marker({map:t,position:r({x:i,y:a}),draggable:!0,icon:f})}function r(o){var n=t.getProjection().fromLatLngToPoint(t.getBounds().getNorthEast()),r=t.getProjection().fromLatLngToPoint(t.getBounds().getSouthWest()),g=Math.pow(2,t.getZoom()),i=new e.google.maps.Point(o.x/g+r.x,o.y/g+n.y);return t.getProjection().fromPointToLatLng(i)}this.draggable({helper:"clone",start:function(e,t){$(t.helper).css({width:"50px",height:"50px","margin-left":e.clientX-$(e.target).offset().left-25,"margin-top":e.clientY-$(e.target).offset().top-25,"z-index":1051})},stop:function(e,t){var r=n(e,t);o&&o(r)}})}})}(window);